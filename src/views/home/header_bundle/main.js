(()=>{const e=document.querySelector(".body");window.addEventListener("load",(()=>{e.insertAdjacentHTML("afterBegin",'\n    <header class="header">\n      <div class="header_logo">\n        <a href="/">\n          Ce1ev.\n        </a>\n      </div>\n      <ul class="search">\n        <li>\n          <input type="text" placeholder="검색어를 입력하세요." class="header_search" id="text" />\n          <button type="button" class="searchBtn">\n            <i class="fa fa-magnifying-glass fa-2x"></i>\n          </button>\n        </li>\n      </ul>\n      <ul class="header_right" id="guest">\n        <li id="header_login">\n            <a href="/login">\n                LOGIN\n            </a>\n        </li>\n        <li id="header_wish">\n            <a href="/register">\n              REGISTER\n            </a>\n        </li>\n        <li id="header_cart">            \n            <a href="/guest">\n                GUEST\n            </a>\n        </li>\n        <li id="header_notice">\n          <a href="/notice"> NOTICE </a>\n        </li>\n      </ul>\n      <ul class="header_right hidden" id="user">\n      <li id="header_cart">\n            <a href="/mypage/myPageCart">\n                CART\n            </a>\n        </li>\n        <li id="header_myPage">\n            <a href="/mypage">\n                MY PAGE\n            </a>\n        </li>\n        <li id="header_logout">\n            <a href="/#" id="logout2">\n              LOG OUT\n            </a>\n        </li>\n      </ul>\n      <ul class="header_right hidden" id="admin">\n        <li id="header_addProduct">\n        <a href="/products">\n          ADD-PRODUCT\n        </a>  \n      </li>\n    <li id="header_mypage">\n      <a href="/admin">\n        ADMIN-PAGE\n      </a>  \n    </li>\n    <li id="header_logout">\n      <a href="/#" id="logout1">\n        LOG OUT\n      </a>\n    </li>\n      </ul>\n    </header>\n    ');const t=document.querySelector("#logout1"),n=document.querySelector("#logout2");t.addEventListener("click",(()=>{sessionStorage.removeItem("token"),window.location.href="/"})),n.addEventListener("click",(()=>{sessionStorage.removeItem("token"),window.location.href="/"}))}))})(),window.addEventListener("load",(async()=>{const e=document.querySelector("#admin"),t=document.querySelector("#user"),n=document.querySelector("#guest"),i=sessionStorage.getItem("token");if(i){const a=await fetch("/api/admin/check",{headers:{Authorization:`Bearer ${i}`}}),{result:s}=await a.json();return"success"===s?(e.classList.remove("hidden"),t.classList.add("hidden"),void n.classList.add("hidden")):(t.classList.remove("hidden"),n.classList.add("hidden"),void e.classList.add("hidden"))}n.classList.remove("hidden"),t.classList.add("hidden"),e.classList.add("hidden")})),(()=>{const e=document.querySelector(".searchBtn"),t=document.querySelector(".header_search");function n(){const e=document.querySelectorAll(".pd_block"),n=document.querySelectorAll(".tag_name"),i=document.querySelectorAll(".pd_brd"),a=document.querySelectorAll(".pd_name"),s=document.querySelectorAll(".tag_name");for(let o=0;o<e.length;o++)e[o].classList.add("hidden"),(n[o].innerHTML===t.value.trim()||n[o].innerHTML.includes(t.value.trim())||i[o].innerHTML===t.value.trim()||i[o].innerHTML.includes(t.value.trim())||a[o].innerHTML===t.value.trim()||a[o].innerHTML.includes(t.value.trim())||s[o].innerHTML===t.value.trim()||s[o].innerHTML.includes(t.value.trim()))&&e[o].classList.remove("hidden")}e.addEventListener("click",n),t.addEventListener("keyup",(function(e){13===e.keyCode&&n()}))})(),(()=>{const e=document.querySelector(".slide");let t=e.offsetWidth;const n=document.querySelector(".slide_prev_button"),i=document.querySelector(".slide_next_button"),a=document.querySelectorAll(".slide_item"),s=a.length;let o=1;const r=document.querySelector(".slide_pagination");for(let e=0;e<s;e++)r.innerHTML+=0===e?'<li class="active">•</li>':"<li>•</li>";const c=document.querySelectorAll(".slide_pagination > li"),l=a[0],d=a[a.length-1],u=document.createElement(l.tagName),h=document.createElement(d.tagName);d.classList.forEach((e=>h.classList.add(e))),h.innerHTML=d.innerHTML,l.classList.forEach((e=>u.classList.add(e))),u.innerHTML=l.innerHTML,a[0].before(h),a[a.length-1].after(u);let m=t*o;function g(){if(o++,o<=s){const e=t*o;a.forEach((t=>{t.setAttribute("style",`left: ${-e}px`)})),c.forEach((e=>e.classList.remove("active"))),c[o-1].classList.add("active")}else{o=0;let e=t*o;a.forEach((t=>{t.setAttribute("style",`transition: 0s; left: ${-e}px`)})),o++,e=t*o,setTimeout((()=>{a.forEach((t=>{t.setAttribute("style",`transition: 0.15s; left: ${-e}px`)}))}),0),c.forEach((e=>e.classList.remove("active"))),c[o-1].classList.add("active")}}a.forEach((e=>{e.setAttribute("style",`left: ${-m}px`)})),i.addEventListener("click",(()=>{g()})),n.addEventListener("click",(()=>{!function(){if(o--,o>0){const e=t*o;a.forEach((t=>{t.setAttribute("style",`left: ${-e}px`)})),c.forEach((e=>e.classList.remove("active"))),c[o-1].classList.add("active")}else{o=s+1;let e=t*o;a.forEach((t=>{t.setAttribute("style",`transition: 0s; left: ${-e}px`)})),o--,e=t*o,setTimeout((()=>{a.forEach((t=>{t.setAttribute("style",`transition: 0.15s; left: ${-e}px`)}))}),0),c.forEach((e=>e.classList.remove("active"))),c[o-1].classList.add("active")}}()})),window.addEventListener("resize",(()=>{t=e.clientWidth}));for(let e=0;e<s;e++)c[e].addEventListener("click",(()=>{o=e+1;const n=t*(o-1);a.forEach((e=>{e.setAttribute("style",`left: ${-n}px`)})),c.forEach((e=>e.classList.remove("active"))),c[o-1].classList.add("active")}));let f=setInterval((()=>{g()}),3e3);e.addEventListener("mouseover",(()=>{clearInterval(f)})),e.addEventListener("mouseout",(()=>{f=setInterval((()=>{g()}),3e3)}))})(),(()=>{const e=document.querySelector(".category");document.querySelector(".header_search"),e.addEventListener("click",(function(e){const t=document.querySelectorAll(".pd_block");for(let n=0;n<t.length;n++){if("category_box"===e.target.id)return;"all"===e.target.id?t.forEach((e=>{e.classList.remove("hidden")})):e.target.id===t[n].id?t[n].classList.remove("hidden"):e.target.id!==t[n].id&&t[n].classList.add("hidden")}}))})(),(()=>{"use strict";async function e(e,t=""){const n=`${e}/${t}`;console.log(`%cGET 요청: ${n} `,"color: #a25cd1;");const i=await fetch(n,{headers:{Authorization:`Bearer ${sessionStorage.getItem("token")}`}});if(!i.ok){const e=await i.json(),{reason:t}=e;throw new Error(t)}return await i.json()}async function t(e,t="",n){const i=`${e}/${t}`,a=JSON.stringify(n);console.log(`%cPATCH 요청: ${i}`,"color: #059c4b;"),console.log(`%cPATCH 요청 데이터: ${a}`,"color: #059c4b;");const s=await fetch(i,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${sessionStorage.getItem("token")}`},body:a});if(!s.ok){const e=await s.json(),{reason:t}=e;throw new Error(t)}return await s.json()}const n=()=>{if(!sessionStorage.getItem("token")){const e=window.location.pathname,t=window.location.search;window.location.replace(`/login?previouspage=${e+t}`)}},i=document.querySelector(".section_box"),a=sessionStorage.getItem("token");!async function(){const s=await fetch("api/products");(await s.json()).forEach((s=>{const o=s.brand,r=s.name,c=s.price,l=s.img,d=s.category,u=s.description,h=s.num,m=s.like;i.insertAdjacentHTML("beforeend",`\n    <section class="pd_block" id="${d}">\n    <img src="${l}"class="box" id="${h}"/>\n    <article class="pd_text">\n      <p class="pd_brd" id="${o}">${o}</p>\n      <p class="pd_name" id="${r}">${r}</p>\n      <div class="tag_box">\n      <div>\n        <a class="tag_category">${d}</a>\n        <a class="tag_name" id="${u}">${u}</a>\n      </div>\n      <p class="pd_price">${c} 원</p>\n      </div>\n      <div class="tag_like">\n          <img class="like_src" src="../image/like.png" alt="" width="30px" id="like_${h}"> \n          <p class="like_count" id="likeCount_${h}">${m}</p>\n      </div>\n    </article>\n  </section>\n    `);const g=document.getElementById(`${h}`),f=document.getElementById(`like_${h}`),v=document.getElementById(`likeCount_${h}`);g.addEventListener("click",(function(){window.location.assign(`/productDetail/${h}`)})),f.addEventListener("click",(async function(i){i.preventDefault(),"like.png"===f.src.split("/")[4]?async function(i){if(i.preventDefault(),a){n();let i=await e("/api/user");const{likeProduct:a}=i,s=i._id,o={num:h,like:m};a.push(h);const r=m+1;m!=r&&(o.like=r,await t("/api/products",h,o),await t("/api/usersLike/like",s,{likeProduct:a}),v.innerText=o.like,f.src="../image/like_hover.png")}else alert("로그인이 필요합니다."),window.location.href="/login"}(i):async function(i){if(i.preventDefault(),a){n();let i=await e("/api/user");const{likeProduct:a}=i,s=i._id,o={num:h,like:m};a.pop(h),m!=m-1&&(o.like=m,await t("/api/products",h,o),await t("/api/usersLike/like",s,{likeProduct:a}),v.innerText=o.like,f.src="../image/like.png")}else alert("로그인이 필요합니다."),window.location.href="/login"}(i)}))}));const o=document.querySelector("#logout1"),r=document.querySelector("#logout2");o.addEventListener("click",(()=>{sessionStorage.removeItem("token"),window.location.href="/"})),r.addEventListener("click",(()=>{sessionStorage.removeItem("token"),window.location.href="/"}))}()})();